<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.kakaopay.banksupport.mapper.BankMapper">

    <insert id="insertBankSupport" parameterType="LocalBankSupport">
        INSERT INTO LOCAL_BANK_SUPPORT
        (
            LBS_ID,
            REGION_ID,
            TARGET,
            USAGE,
            SUPPORT_LIMIT,
            RATE,
            INSTITUTE,
            MGMT,
            RECEPTION
        )
        VALUES
        (
            #{lbsId},
            #{regionId},
            #{target},
            #{usage},
            #{supportLimit},
            #{rate},
            #{institute},
            #{mgmt},
            #{reception}
        )
    </insert>

    <select id="selectBankSupport" parameterType="LocalBankSupport" resultType="LocalBankSupport">
        SELECT *
        FROM   LOCAL_BANK_SUPPORT
    </select>

    <insert id="insertRegion" parameterType="RegionMas">
        INSERT INTO REGION_MAS
        (
            REGION_ID,
            NAME,
            MAP_ID
        )
        VALUES
        (
            #{regionId},
            #{name},
            #{mapId}
        )
    </insert>

    <!-- 용도 코드 저장 -->
    <insert id="insertUsageCode" parameterType="UsageCode">
        INSERT INTO USAGE_CODE
        (
            USAGE_CODE_ID,
            VAL,
            USE_YN
        )
        VALUES
        (
            #{usageCodeId},
            #{val},
            #{useYn}
        )
    </insert>

    <!-- 용도 옵션 저장 -->
    <insert id="insertUsageOpt" parameterType="UsageOpt">
        INSERT INTO USAGE_OPT
        (
            USAGE_CODE_ID,
            LBS_ID,
            USE_YN
        )
        VALUES
        (
            #{usageCodeId},
            #{lbsId},
            #{useYn}
        )
    </insert>

    <!-- 지원 정보 상세 저장 -->
    <insert id="insertLocalBankSupportDtl" parameterType="LocalBankSupportDtl">
        INSERT INTO LOCAL_BANK_SUPPORT_DTL
        (
            LBS_DTL_ID,
            LBS_ID,
            SUPPORT_LIMIT,
            RATE_MIN,
            RATE_AVG,
            RATE_MAX
        )
        VALUES
        (
            TO_CHAR(SYSDATE,'YYYYMMDD')||SEQ_LBS_DTL_ID.NEXTVAL,
            #{lbsId},
            #{supportLimit},
            #{rateMin},
            #{rateAvg},
            #{rateMax}
        )
    </insert>

</mapper>
